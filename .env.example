# ================================================
# Enterprise SCADA System v2.0 - Environment Configuration
# ================================================
# This file contains all configuration variables for the SCADA system.
# Copy this file to `.env` and update the values for your environment.
#
# IMPORTANT SECURITY NOTES:
# - NEVER commit the actual .env file to version control
# - Change all passwords and secrets before deploying to production
# - Use strong, randomly generated passwords (min 16 characters)
# - Enable MFA for all user accounts in production
#
# For detailed setup instructions, see: WINDOWS_SETUP.md
# ================================================

# ===== DATABASE CONFIGURATION =====
# PostgreSQL is used for storing metadata (tags, sites, users, alarms, etc.)

# PostgreSQL Connection String
# Format: Host=hostname;Database=dbname;Username=user;Password=pass;Port=5432
# Default: postgres (container name), scada (database), scada/scada123 (credentials)
POSTGRES_CONNECTION=Host=postgres;Database=scada;Username=scada;Password=scada123

# Direct PostgreSQL credentials (used by migrations and scripts)
POSTGRES_USER=scada                    # Database username
POSTGRES_PASSWORD=scada123             # Database password - CHANGE IN PRODUCTION!
POSTGRES_DB=scada                      # Database name

# ===== TIME-SERIES DATABASE (InfluxDB) =====
# InfluxDB stores high-frequency time-series data (tag values over time)
# Handles millions of data points efficiently

# InfluxDB Server URL
# Default: http://influxdb:8086 (container name and default port)
INFLUXDB_URL=http://influxdb:8086

# InfluxDB Authentication Token
# This is like a password for InfluxDB API access
# Generate a secure random token for production: https://www.uuidgenerator.net/
INFLUXDB_TOKEN=scada-token-change-in-production

# InfluxDB Organization Name
# Organizations group users and data buckets
INFLUXDB_ORG=scada-org

# InfluxDB Bucket (Database)
# Buckets are like databases in InfluxDB - they store time-series data
INFLUXDB_BUCKET=scada-data

# InfluxDB Retention Policy
# How long to keep data (e.g., 30d = 30 days, 1y = 1 year, 0 = forever)
# Longer retention = more disk space needed
INFLUXDB_RETENTION=365d

# ===== CACHE (Redis) =====
# Redis provides in-memory caching for fast data access
# Used for: current tag values, session storage, rate limiting

# Redis Connection String
# Format: hostname:port,password=yourpassword
# Default: redis:6379 (container name and default port)
REDIS_CONNECTION=redis:6379,password=redis123

# Redis Password
# Used for authentication - CHANGE IN PRODUCTION!
REDIS_PASSWORD=redis123

# Redis Database Number (0-15)
# Redis supports multiple databases (0 is default)
REDIS_DB=0

# ===== MESSAGE QUEUE (RabbitMQ) =====
# RabbitMQ handles asynchronous message passing between services
# Used for: alarm notifications, data acquisition, event distribution

# RabbitMQ Host
# Default: rabbitmq (container name)
RABBITMQ_HOST=rabbitmq

# RabbitMQ Port
# Default: 5672 (AMQP protocol)
# Management UI: 15672 (http://localhost:15672)
RABBITMQ_PORT=5672

# RabbitMQ Credentials
# Default: guest/guest (only works on localhost)
# MUST change for production/remote access
RABBITMQ_USER=guest
RABBITMQ_PASS=guest

# RabbitMQ Virtual Host
# Virtual hosts provide logical grouping (like databases in SQL)
# Default: / (root virtual host)
RABBITMQ_VHOST=/

# ===== SECURITY & AUTHENTICATION =====
# JWT (JSON Web Token) settings for user authentication

# JWT Secret Key
# CRITICAL: Must be a long, random, secret string
# Generate: openssl rand -base64 64
# This is used to sign JWT tokens - if compromised, all sessions are invalid
JWT_SECRET=change-this-to-a-secure-256-bit-random-string-in-production

# JWT Issuer
# Identifies who created the token (your application name)
JWT_ISSUER=ScadaSystem

# JWT Audience
# Identifies who the token is intended for (your client applications)
JWT_AUDIENCE=ScadaClient

# JWT Token Expiry (minutes)
# How long before users need to re-login
# Shorter = more secure but less convenient
# Longer = more convenient but higher security risk if token is stolen
# Recommended: 60 minutes
JWT_EXPIRY_MINUTES=60

# ===== MULTI-FACTOR AUTHENTICATION (MFA) =====
# TOTP (Time-based One-Time Password) - works with Google Authenticator, Authy, etc.

# MFA Issuer Name
# Shows up in authenticator app as "ScadaSystem (user@email.com)"
MFA_ISSUER=ScadaSystem

# MFA Enforcement
# Set to 'true' to require MFA for all users (recommended for production)
# Set to 'false' to make MFA optional (for development/testing)
MFA_REQUIRED=false

# ===== PASSWORD POLICY =====
# Requirements for user passwords

# Minimum Password Length
# Recommended: 12+ characters
PASSWORD_MIN_LENGTH=8

# Require Uppercase Letter
# If true, passwords must contain at least one uppercase letter (A-Z)
PASSWORD_REQUIRE_UPPERCASE=true

# Require Lowercase Letter
# If true, passwords must contain at least one lowercase letter (a-z)
PASSWORD_REQUIRE_LOWERCASE=true

# Require Digit
# If true, passwords must contain at least one number (0-9)
PASSWORD_REQUIRE_DIGIT=true

# Require Special Character
# If true, passwords must contain at least one special character (!@#$%^&*)
PASSWORD_REQUIRE_SPECIAL=true

# ===== SESSION MANAGEMENT =====

# Session Timeout (minutes)
# How long before inactive sessions expire
SESSION_TIMEOUT_MINUTES=30

# Max Concurrent Sessions Per User
# How many devices can one user log in from simultaneously
# Set to 1 for maximum security (single session per user)
MAX_CONCURRENT_SESSIONS=3

# ===== EMAIL NOTIFICATIONS =====
# SMTP settings for sending alarm notifications and reports via email

# SMTP Server Hostname
# Gmail: smtp.gmail.com
# Outlook: smtp-mail.outlook.com
# Office 365: smtp.office365.com
SMTP_HOST=smtp.gmail.com

# SMTP Port
# Standard ports: 25 (unencrypted), 587 (STARTTLS), 465 (SSL)
# Recommended: 587 with STARTTLS
SMTP_PORT=587

# SMTP Username
# Usually your full email address
SMTP_USER=your-email@gmail.com

# SMTP Password
# For Gmail: Use "App Password" not your regular password
# Generate at: https://myaccount.google.com/apppasswords
SMTP_PASS=your-app-specific-password

# Email "From" Address
# How emails will appear to recipients
# Format: Display Name <email@address.com>
SMTP_FROM=SCADA Alerts <your-email@gmail.com>

# Enable SSL/TLS
# Use encrypted connection for email
SMTP_USE_SSL=true

# ===== SMS NOTIFICATIONS =====
# Twilio settings for sending SMS alarm notifications

# Twilio Account SID
# Find at: https://console.twilio.com/
# Format: ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_ACCOUNT_SID=your-twilio-account-sid

# Twilio Auth Token
# Find at: https://console.twilio.com/
# Keep this secret!
TWILIO_AUTH_TOKEN=your-twilio-auth-token

# Twilio Phone Number
# Your Twilio-provided phone number (with SMS capability)
# Format: +1234567890
TWILIO_FROM_NUMBER=+1234567890

# ===== SERVICE URLs =====
# Internal URLs for microservices communication (Docker network)

# API Gateway
# Central entry point for all API requests
API_GATEWAY_URL=http://api-gateway:5000

# ScadaCore Service
# Tag management and core SCADA functionality
SCADA_CORE_URL=http://scada-core:5001

# Data Acquisition Service
# High-speed data ingestion (100k+ tags/sec)
DATA_ACQUISITION_URL=http://data-acquisition:5002

# Alarm Management Service
# Real-time alarm processing and notifications
ALARM_SERVICE_URL=http://alarm-management:5003

# Authentication Service
# User login, JWT tokens, MFA
AUTH_SERVICE_URL=http://auth-service:5004

# Reporting Service
# PDF/Excel report generation
REPORTING_SERVICE_URL=http://reporting-service:5005

# GraphQL Service
# Modern API with flexible querying
GRAPHQL_SERVICE_URL=http://graphql-service:5006

# WebSocket Service
# Real-time data streaming to frontend
WEBSOCKET_SERVICE_URL=http://websocket-service:5007

# ML Service (Python FastAPI)
# AI/ML predictions and anomaly detection
ML_SERVICE_URL=http://ml-service:8000

# Analytics Service
# ClickHouse integration for analytics
ANALYTICS_SERVICE_URL=http://analytics-service:5009

# OPC UA Server
# Industrial protocol server for ICS device connectivity
OPC_UA_SERVER_URL=opc.tcp://opc-ua-server:4840

# ===== FRONTEND CONFIGURATION =====
# React application environment variables (prefix with REACT_APP_)

# Backend API URL (Public - accessed from browser)
# Use http://localhost:5000 for local development
# Use https://your-domain.com for production
REACT_APP_API_URL=http://localhost:5000

# WebSocket URL for real-time updates
# ws:// for development, wss:// for production (secure)
REACT_APP_WS_URL=ws://localhost:5007/hubs/tags

# GraphQL API URL
REACT_APP_GRAPHQL_URL=http://localhost:5006/graphql

# ML Service URL (for predictions in frontend)
REACT_APP_ML_API_URL=http://localhost:8000

# Enable development mode features
# Set to 'false' in production to disable debug tools
REACT_APP_DEV_MODE=true

# Application Title
# Appears in browser tab and dashboard header
REACT_APP_TITLE=Enterprise SCADA System

# ===== CLICKHOUSE (Analytics Database) =====
# High-performance columnar database for analytics

# ClickHouse Server
CLICKHOUSE_HOST=clickhouse

# ClickHouse Port
# HTTP: 8123, Native: 9000
CLICKHOUSE_PORT=9000

# ClickHouse Database Name
CLICKHOUSE_DB=scada_analytics

# ClickHouse Credentials
CLICKHOUSE_USER=scada
CLICKHOUSE_PASSWORD=clickhouse123

# ===== MONITORING & METRICS =====

# Prometheus Settings
# Metrics collection and alerting
PROMETHEUS_URL=http://prometheus:9090

# Grafana Settings  
# Visualization and dashboards
GRAFANA_URL=http://grafana:3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin123

# Enable Detailed Metrics
# Collects more granular performance data (uses more resources)
ENABLE_DETAILED_METRICS=true

# ===== APPLICATION SETTINGS =====

# Environment
# Options: Development, Staging, Production
# Affects logging verbosity and error detail exposure
ASPNETCORE_ENVIRONMENT=Development

# Logging Level
# Options: Trace, Debug, Information, Warning, Error, Critical
# Development: Debug, Production: Information or Warning
LOG_LEVEL=Information

# Enable Swagger/OpenAPI Documentation
# Shows interactive API documentation at /swagger
# Recommended: true for development, false for production
ENABLE_SWAGGER=true

# CORS Allowed Origins
# Comma-separated list of allowed frontend URLs
# * = allow all (INSECURE - only for development!)
# Production example: https://scada.company.com,https://dashboard.company.com
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ===== FEATURE FLAGS =====
# Enable/disable features without code changes

# Enable Machine Learning Features
# Predictive maintenance, anomaly detection, forecasting
FEATURE_ML_ENABLED=true

# Enable Real-Time Streaming
# WebSocket-based live data updates
FEATURE_REALTIME_ENABLED=true

# Enable GraphQL API
# Modern alternative to REST API
FEATURE_GRAPHQL_ENABLED=true

# Enable 3D Visualization
# Three.js-based digital twin models
FEATURE_3D_VISUALIZATION_ENABLED=true

# Enable PWA (Progressive Web App)
# Offline support, installable on mobile
FEATURE_PWA_ENABLED=true

# Enable Advanced Analytics
# ClickHouse integration for big data analytics
FEATURE_ANALYTICS_ENABLED=true

# ===== DATA RETENTION & BACKUP =====

# Backup Directory
# Where automated backups are stored
BACKUP_DIR=./backups

# Backup Retention Days
# How long to keep old backups before deleting
BACKUP_RETENTION_DAYS=30

# Auto Backup Schedule (Cron format)
# Default: Daily at 2 AM
# Format: minute hour day month weekday
# Examples:
#   - 0 2 * * * = 2:00 AM every day
#   - 0 */6 * * * = Every 6 hours
#   - 0 0 * * 0 = Midnight every Sunday
AUTO_BACKUP_SCHEDULE=0 2 * * *

# ===== PERFORMANCE TUNING =====

# Max Data Points Per Tag Query
# Limits how much historical data can be queried at once
# Prevents overload from large time range queries
MAX_DATAPOINTS_PER_QUERY=10000

# Tag Cache TTL (seconds)
# How long to cache tag values in Redis
# Shorter = more database load, fresher data
# Longer = less database load, potentially stale data
TAG_CACHE_TTL=60

# Connection Pool Size
# Maximum database connections per service
# Higher = more concurrent queries, more memory
CONNECTION_POOL_SIZE=50

# Request Timeout (seconds)
# Maximum time to wait for a response
REQUEST_TIMEOUT=30

# ===== DEVELOPMENT OPTIONS =====

# Seed Database on Startup
# Automatically loads sample data when containers start
# Set to 'false' in production to preserve data
SEED_DATABASE=true

# Hot Reload (Development)
# Auto-restart services when code changes
# Only works in development mode
HOT_RELOAD=true

# Enable SQL Logging
# Logs all SQL queries (verbose - for debugging only)
ENABLE_SQL_LOGGING=false

# ================================================
# END OF CONFIGURATION
# ================================================
#
# After updating this file:
# 1. Copy to .env: cp .env.example .env
# 2. Edit .env with your actual values
# 3. Restart services: docker-compose down && docker-compose up -d
#
# For troubleshooting, see: WINDOWS_SETUP.md
# For adding equipment, see: docs/ADDING_EQUIPMENT_GUIDE.md
# ================================================
